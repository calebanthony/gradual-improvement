{"title":"Laravel Mix and Bootstrap 4's JavaScript","meta":{"index":2,"fileName":"2017-03-16-LaravelMixAndBootstrap4.md","section":"/","dirName":"/blog","filePath":"/Volumes/Code/personal-dev/blog/content/blog/2017-03-16-LaravelMixAndBootstrap4.md"},"date":"2017-03-16","path":"/blog/blog/laravel-mix-and-bootstrap4","permalink":"/blog/laravel-mix-and-bootstrap4","anchors":[],"body":"<p>It seems that getting Bootstrap 4 to play nicely with just about anything takes quite a bit of work. I felt like bashing my head into a brick wall several times during my work to try and get this functional. So I’m here to save your precious brain cells and just tell you what I did.</p>\n<p>Of course you can always grab everything you need from a CDN and slap it into your <code>index.html</code> but I wanted a modularized way of building out my assets. Because we’re embedding our application inside clients’ websites, we want it to be as lightweight as possible. So only pulling in exactly what we need is crucial.</p>\n<p>If you’re like me and don’t want to weigh down your application unnecessarily, this is what you’re looking for.</p>\n<p>First, you’re going to want:</p>\n<ul>\n<li>Laravel Mix, specifically your webpack.mix.js file. If you have Laravel 5.4, this should be right in your project root directory.</li>\n<li>Bootstrap 4 &amp; Tether installed. <code>npm i --save-dev bootstrap@4.0.0-alpha.6 tether</code></li>\n<li>For the <code>exports-loader</code> command, you’ll need Bootstrap Loader. <code>npm i --save-dev bootstrap-loader</code>. This isn’t <em>officially</em> supported for Bootstrap 4, but it works fine.</li>\n</ul>\n<p>This is literally my <code>webpack.mix.js</code> from the project I’m working on at work, with the custom stuff we have stripped out.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\" spellcheck=\"true\">// webpack.mix.js</span>\nmix  \n  <span class=\"token punctuation\">.</span><span class=\"token function\">autoload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    jquery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'$'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'jQuery'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'window.jQuery'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    tether<span class=\"token punctuation\">:</span> <span class=\"token string\">'Tether'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\" spellcheck=\"true\">// This nasty little syntax is necessary based on the way Boostrap is packaged.</span>\n    <span class=\"token string\">'exports-loader?Util!bootstrap/js/dist/util'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Util'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\" spellcheck=\"true\">// All bootstrap dependencies.</span>\n    <span class=\"token comment\" spellcheck=\"true\">// Bootstrap isn't clear what you need, so when you add something, check console for errors.</span>\n    <span class=\"token comment\" spellcheck=\"true\">// It'll tell you what you need.</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Alert!bootstrap/js/dist/alert\": 'Alert',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Button!bootstrap/js/dist/button\": 'Button',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Carousel!bootstrap/js/dist/carousel\": 'Carousel',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Collapse!bootstrap/js/dist/collapse\": 'Collapse',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Dropdown!bootstrap/js/dist/dropdown\": 'Dropdown',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Modal!bootstrap/js/dist/modal\": 'Modal',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Popover!bootstrap/js/dist/popover\": 'Popover',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Scrollspy!bootstrap/js/dist/scrollspy\": 'Scrollspy',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Tab!bootstrap/js/dist/tab\": 'Tab',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Tooltip!bootstrap/js/dist/tooltip\": 'Tooltip',</span>\n    <span class=\"token comment\" spellcheck=\"true\">//  \"exports-loader?Util!bootstrap/js/dist/util\": 'Util'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">js</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token comment\" spellcheck=\"true\">// This is Laravel's bootstrap file.</span>\n    <span class=\"token string\">'resources/assets/js/bootstrap.js'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\" spellcheck=\"true\">// This is all we're including from Bootstrap's JS.</span>\n    <span class=\"token comment\" spellcheck=\"true\">// Feel free to include whatever else you want, along with the appropriate dependencies.</span>\n    <span class=\"token string\">'bootstrap/js/dist/dropdown.js'</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js/all.js'</span><span class=\"token punctuation\">)</span>\n\n</code></pre>\n<p>The reason this took me so long to figure out is because the way Laravel Mix uses <code>.autoload</code> is <em>backwards</em> from the typical Webpack configuration.</p>\n<p>Whether this is a design decision or oversight, it sure caused me a few hours of pain.</p>\n<h4>Webpack ProvidePlugin</h4>\n<p>Here, the package names are on the right, and the variable name is on the left.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>ProvidePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>  \n    jQuery<span class=\"token punctuation\">:</span> <span class=\"token string\">'jquery'</span><span class=\"token punctuation\">,</span>\n    $<span class=\"token punctuation\">:</span> <span class=\"token string\">'jquery'</span><span class=\"token punctuation\">,</span>\n    jquery<span class=\"token punctuation\">:</span> <span class=\"token string\">'jquery'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</code></pre>\n<h4>Laravel Mix Autoload</h4>\n<p>Here, the package name is on the left, and variable names are on the right.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">autoload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>  \n    jquery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'$'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'jQuery'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'window.jQuery'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    tether<span class=\"token punctuation\">:</span> <span class=\"token string\">'Tether'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'exports-loader?Util!bootstrap/js/dist/util'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Util'</span><span class=\"token punctuation\">,</span>\n</code></pre>\n<p>This isn’t documented in the Laravel docs, just in the <a href=\"https://github.com/JeffreyWay/laravel-mix/blob/master/docs/autoloading.md\">Mix wiki on GitHub</a>. and doesn’t give an error when trying to run webpack, so it took a lot of tracking down to get this figured out.</p>\n<p>But alas, here it is! So stick this into your project and enjoy!</p>\n"}